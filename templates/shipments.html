{% extends "sidebar.html" %}
{% block content %}

<title>Shipments</title>
<link href="/static/shipments.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<h1>Shipments</h1>

<div class="search-container">
    <input type="text" id="search-input" placeholder="Search..." oninput="searchShipments()">
    <i class="fa fa-search search-icon"></i>
</div>

<div class="card-container" id="card-container">
    {% for shipment in shipments %}
    <div class="card justify-content-center" onclick="toggleDetails(this)">
        <div class="card-header">
            <h3>Submitted By: {{ shipment.username }}</h3>
            <div>Role: {{ shipment.role }}</div>
        </div>
        <div class="card-details">
            <p><strong>Container No:</strong> {{ shipment.container_no }}</p>
            <p><strong>Route Details:</strong> {{ shipment.route_details }}</p>
            <p><strong>Goods Type:</strong> {{ shipment.goods_type }}</p>
            <p><strong>Device:</strong> {{ shipment.device }}</p>
            <p><strong>Expected Delivery Date:</strong> {{ shipment.expected_delivery_date }}</p>
            <p><strong>PO Number:</strong> {{ shipment.po_number }}</p>
            <p><strong>Delivery Number:</strong> {{ shipment.delivery_number }}</p>
            <p><strong>NDC Number:</strong> {{ shipment.ndc_number }}</p>
            <p><strong>Batch ID:</strong> {{ shipment.batch_id }}</p>
            <p><strong>Serial Number of Goods:</strong> {{ shipment.serial_number_of_goods }}</p>
            <p><strong>Description:</strong> {{ shipment.shipment_description }}</p>
        </div>
        <div class="toggle-button">Show Details</div>
    </div>
    {% endfor %}
</div>

<script src="/static/javascript/shipments.js"></script>
<script>
function searchShipments() {
    const input = document.getElementById('search-input').value.toLowerCase();
    const cards = document.getElementsByClassName('card');

    for (let card of cards) {
        const text = card.innerText.toLowerCase();
        if (text.includes(input)) {
            card.style.display = "";
        } else {
            card.style.display = "none";
        }
    }
}
</script>

{% endblock %}
